<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Docker Cheat Sheet</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="/assets/css/style.css">
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Docker Cheat Sheet | Vault-Tec Terminal</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Docker Cheat Sheet" />
<meta name="author" content="RedTeamer403" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Professional penetration tester portfolio" />
<meta property="og:description" content="Professional penetration tester portfolio" />
<link rel="canonical" href="http://localhost:4000/notes/container/docker/" />
<meta property="og:url" content="http://localhost:4000/notes/container/docker/" />
<meta property="og:site_name" content="Vault-Tec Terminal" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Docker Cheat Sheet" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"RedTeamer403"},"description":"Professional penetration tester portfolio","headline":"Docker Cheat Sheet","url":"http://localhost:4000/notes/container/docker/"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
  <div id="init-screen" class="init-screen">
    <div class="init-content">
      <div class="init-step">Initializing VAULT-TEC OS...</div>
      <div class="init-step">Loading security protocols...</div>
      <div class="init-step">Establishing secure connection...</div>
      <div class="init-step">Connection established.</div>
      <div class="init-step">SYSTEM READY</div>
    </div>
  </div>

  <div id="main-content" class="main-content hidden">
    <header>
      <div class="container">
        <h1>Vault-Tec Terminal</h1>
        <nav>
          <a href="/" >ABOUT</a>
          <a href="/posts" >POSTS</a>
          <a href="/notes" class="active">NOTES</a>
        </nav>
      </div>
    </header>

    <main class="container">
      <div class="search-container">
        <input type="text" class="search-input" placeholder="Search notes...">
      </div>
      <div class="notes-container">
        <div class="notes-sidebar">
          <div class="notes-category">
            <h3>CheatSheets</h3>
            <div class="notes-subcategory">
              <a href="/notes/cheat/curl/" >CURL</a>
              <a href="/notes/cheat/DNS/" >DNS</a>
              <a href="/notes/cheat/file/" >File Transfer</a>
              <a href="/notes/cheat/hydra/" >Hydra</a>
              <a href="/notes/cheat/john/" >JohnTheRipper</a>
              <a href="/notes/cheat/ncat/" >NCAT</a>
              <a href="/notes/cheat/nmap/" >NMAP</a>
              <a href="/notes/cheat/shell/" >Reverse Shell</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Active Directory</h3>
            <div class="notes-subcategory">
              <a href="/notes/ad/enum/" >Domain Enumeration</a>
              <a href="/notes/ad/attack/" >Attack Vectors</a>
              <a href="/notes/ad/persist/" >Persistence</a>
              <a href="/notes/ad/lateral/" >Lateral Movement</a>
            </div>
          </div>
          
          <div class="notes-category">
            <h3>Cloud</h3>
            <div class="notes-subcategory">
              <a href="/notes/cloud/aws/" >AWS</a>
              <a href="/notes/cloud/azure/" >Azure</a>
              <a href="/notes/cloud/google/" >Google</a>
              <a href="/notes/cloud/terra/" >Terraform</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Container</h3>
            <div class="notes-subcategory">
              <a href="/notes/container/docker/" class="active">Docker</a>
              <a href="/notes/container/k8s/" >Kubernetes</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Linux</h3>
            <div class="notes-subcategory">
              <a href="/notes/linux/enum/" >Enumeration</a>
              <a href="/notes/linux/privesc/" >Privilege Escalation</a>
              <a href="/notes/linux/post/" >Post Exploitation</a>
              <a href="/notes/linux/checklist/" >Penetration Testing Checklist</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Network</h3>
            <div class="notes-subcategory">
              <a href="/notes/network/recon/" >Reconnaissance</a>
              <a href="/notes/network/scan/" >Port Scanning</a>
              <a href="/notes/network/pivot/" >Pivoting</a>
              <a href="/notes/network/sniff/" >Traffic Analysis</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Windows</h3>
            <div class="notes-subcategory">
              <a href="/notes/windows/enum/" >Enumeration</a>
              <a href="/notes/windows/privesc/" >Privilege Escalation</a>
              <a href="/notes/windows/post/" >Post Exploitation</a>
              <a href="/notes/windows/av/" >AV/EDR Evasion</a>
            </div>
          </div>

          <div class="notes-category">
            <h3>Web Application</h3>
            <div class="notes-subcategory">
              <a href="/notes/web/recon/" >Reconnaissance</a>
              <a href="/notes/web/vulns/" >Common Vulnerabilities</a>
              <a href="/notes/web/auth/" >Authentication Bypass</a>
              <a href="/notes/web/api/" >API Testing</a>
            </div>
          </div>
        </div>

        <div class="notes-content">
          <div id="search-results"></div>
          <div id="note-content">
            <h1 id="docker-cheat-sheet">Docker Cheat Sheet</h1>

<h2 id="commands">Commands</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#Obtain Docker client, API, Engine, containerd, runc, docker-init versions.</span>
docker version

<span class="c">#Get more information about Docker configurations:</span>
docker info

<span class="c">#Download the specified image from the registry:</span>
docker pull registry:5000/alpine

<span class="c">#Retrieve detailed information about a container:</span>
docker inspect &lt;containerID&gt;

<span class="c">#List information about Docker networks:</span>
docker network <span class="nb">ls</span>

<span class="c">#Get an interactive shell inside a running container:</span>
docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;containerID&gt; /bin/sh

<span class="c">#Create a new image from changes to a container and push it to a registry:</span>
docker commit &lt;containerID&gt; registry:5000/nome-do-container

<span class="c">#Export a containerâ€™s filesystem as a tar archive:</span>
docker <span class="nb">export</span> <span class="nt">-o</span> alpine.tar &lt;containerid&gt;

<span class="c">#Save a Docker image to a tar archive:</span>
docker save <span class="nt">-o</span> ubuntu.tar &lt;image&gt;

<span class="c">#List all running and stopped containers:</span>
docker ps <span class="nt">-a</span>

<span class="c">#Stop a running container:</span>
docker stop &lt;containerID&gt;

<span class="c">#Remove a container by its ID:</span>
docker <span class="nb">rm</span> &lt;containerID&gt;

<span class="c">#List Docker images:</span>
docker image <span class="nb">ls</span>

<span class="c">#Remove a Docker image by its ID:</span>
docker rmi &lt;imageID&gt;

<span class="c">#Remove all stopped containers, unused networks, dangling images, and build cache:</span>
docker system prune <span class="nt">-a</span>

<span class="c">#To execute a container:</span>
docker run <span class="nt">--name</span> ubuntu_test <span class="nt">-dt</span> ubuntu:bionic

<span class="c">#Push the custom built image &lt;dockerid&gt;/modified_ubuntu:&lt;tag&gt; to a Docker registry:</span>
docker push &lt;dockerid&gt;/modified_ubuntu:&lt;tag&gt;
</code></pre></div></div>

<h3 id="docker-compose">Docker Compose</h3>
<ol>
  <li>Create and manage containers defined in YAML file(s).</li>
  <li>Use .env file for environment variables configuration.</li>
</ol>

<p>docker-compose.yml Example:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.8'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:latest</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8080:80"</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./webapp:/usr/share/nginx/html</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">NGINX_PORT=80</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">my-network</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db</span>

  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:5.7</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">MYSQL_ROOT_PASSWORD=secret</span>
      <span class="pi">-</span> <span class="s">MYSQL_DATABASE=myapp_db</span>
      <span class="pi">-</span> <span class="s">MYSQL_USER=myapp_user</span>
      <span class="pi">-</span> <span class="s">MYSQL_PASSWORD=myapp_password</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">db-data:/var/lib/mysql</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">my-network</span>

<span class="na">networks</span><span class="pi">:</span>
  <span class="na">my-network</span><span class="pi">:</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">db-data</span><span class="pi">:</span>
</code></pre></div></div>

<p>Start:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nt">-f</span> docker-compose.yml up <span class="nt">-d</span>
</code></pre></div></div>

<h2 id="security-testing-red-team-focus">Security Testing (Red Team Focus)</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Enumerate all containers for sensitive data </span>
docker ps <span class="nt">-a</span> docker inspect &lt;containerID&gt; | <span class="nb">grep</span> <span class="nt">-i</span> password 

<span class="c"># Check for privileged containers </span>
docker inspect &lt;containerID&gt; | <span class="nb">grep</span> <span class="nt">-i</span> privileged 

<span class="c"># List exposed ports </span>
docker ps <span class="nt">--format</span> <span class="s2">"</span><span class="se">\t</span><span class="s2">"</span> 

<span class="c"># Find container capabilities </span>
docker inspect &lt;containerID&gt; | jq <span class="s1">'.[] | .HostConfig.Capabilities'</span> 

<span class="c"># Check volume mounts for host access </span>
docker inspect &lt;containerID&gt; | jq <span class="s1">'.[] | .Mounts'</span> 

<span class="c"># Test for root in container </span>
docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;containerID&gt; <span class="nb">whoami</span> 

<span class="c"># Scan images for vulnerabilities </span>
trivy image &lt;image-name&gt; 

<span class="c"># Check for running processes in container </span>
docker top &lt;containerID&gt; 

<span class="c"># Inspect networks for misconfigurations </span>
docker network <span class="nb">ls </span>docker network inspect &lt;network-name&gt; 

<span class="c"># Extract secrets from environment </span>
docker inspect &lt;containerID&gt; | <span class="nb">grep</span> <span class="nt">-i</span> <span class="nb">env</span> 

<span class="c"># Test container breakout (if privileged) </span>
docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--privileged</span> &lt;image&gt; /bin/sh 

<span class="c"># Check Docker daemon API exposure </span>
curl http://localhost:2375/_ping 

<span class="c"># List Docker volumes for sensitive data </span>
docker volume <span class="nb">ls </span>docker volume inspect &lt;volume-name&gt; 

<span class="c"># Test privilege escalation via mounted files </span>
docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;containerID&gt; <span class="nb">cat</span> /host/etc/passwd 

<span class="c"># Scan for misconfigured permissions </span>
docker inspect &lt;containerID&gt; | jq <span class="s1">'.[] | .User'</span> 

<span class="c"># Check for host PID namespace </span>
docker inspect &lt;containerID&gt; | jq <span class="s1">'.[] | .HostConfig.PidMode'</span> 

<span class="c"># Test network namespace sharing </span>
docker <span class="nb">exec</span> <span class="nt">-it</span> &lt;containerID&gt; ip addr 

<span class="c"># Use sysdig for runtime monitoring </span>
sysdig <span class="nt">-p</span> <span class="s2">"%evt.time %proc.name %container.name"</span> container.name<span class="o">=</span>&lt;container&gt;
</code></pre></div></div>

<h3 id="automated-security-tools">Automated Security Tools</h3>
<p>Trivy: <code class="language-plaintext highlighter-rouge">trivy image &lt;image-name&gt;</code></p>

<p>Sysdig Falco: <code class="language-plaintext highlighter-rouge">falco --pid &lt;pid&gt;</code></p>

<p>Docker Bench for Security: <code class="language-plaintext highlighter-rouge">docker run -it --rm -v /var/run/docker.sock:/var/run/docker.sock docker/docker-bench-security</code></p>

<p>Clair: <code class="language-plaintext highlighter-rouge">clairctl analyze &lt;image&gt;</code></p>

<p>Aqua Security: <code class="language-plaintext highlighter-rouge">aqua scan &lt;container&gt;</code></p>

<p>Dagda: <code class="language-plaintext highlighter-rouge">dagda scan &lt;image&gt;</code></p>

          </div>
        </div>
      </div>
    </main>

    <div class="system-info">
      <div class="terminal-time"></div>
      <div class="location-info"></div>
    </div>
  </div>

  <script src="/assets/js/main.js"></script>
</body>
</html>